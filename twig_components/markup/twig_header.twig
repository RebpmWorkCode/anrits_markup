{% set headerClass = 'layout-header' %}
{% set favoriteButton = false %}
{% set favoriteButtonWrapperClass = '' %}
{% set phoneClass = 'light' %}
{% set logoPath = 'logo.png' %}
{% if (_view.request.controller == 'realty' and (_view.request.action == 'view' or _view.request.action == 'view_slug')) %}
    {% set headerClass = 'layout-header dark' %}
    {% set favoriteButton = true %}
    {% set favoriteButtonWrapperClass = 'selected-count light' %}
{% endif %}
{% if (_view.request.controller == 'favorites' and _view.request.action == 'index') %}
    {% set headerClass = 'layout-header light' %}
    {% set favoriteButton = true %}
    {% set favoriteButtonWrapperClass = 'selected-count dark' %}
    {% set phoneClass = 'dark' %}
    {% set logoPath = 'logo-dark.png' %}
{% endif %}
<header class="{{ headerClass }}">
    <div class="container">
        <div class="row">
            <div class="col-5-12 align-right hidden-xs">
                <a href="tel:{{ config.Site.phone }}" class="phone-link {{ phoneClass }}">
                    <span class="phone-icon-wrap">
                        <svg class="svg-icon phone-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 459 459" xml:space="preserve">
                            <path class="st0" d="M433.5,318.8c-30.6,0-61.2-5.1-91.8-15.3c-7.6-2.5-17.9,0-25.5,5.1l-56.1,56.1 c-71.4-35.7-130.1-96.9-168.3-168.3l56.1-56.1c7.6-7.6,10.2-17.8,5.1-25.5c-7.6-28.1-12.8-58.7-12.8-89.3 c0-15.3-10.2-25.5-25.5-25.5H25.5C10.2,0,0,10.2,0,25.5C0,265.2,193.8,459,433.5,459c15.3,0,25.5-10.2,25.5-25.5v-89.3 C459,329,448.8,318.8,433.5,318.8z"/>
                        </svg>
                    </span> {{ config.Site.phone }}
                </a>
            </div>
            <div class="col-1-6 col-xs-1-2 align-center align-right-mobile">
                <a href="/" class="logo">
                    <picture>
                        <source media="(max-width: 640px)" srcset="/uploads/assets/images/logo-mob.png">
                        <img src="/uploads/assets/images/{{ logoPath }}" alt=" ">
                    </picture>
                </a>
            </div>
            <div class="col-5-12 col-xs-1-2 align-right">
                <div class="si-phone">
                    <a href="tel:{{ config.Site.phone }}" class="phone-link {{ phoneClass }}">
                        <span class="phone-icon-wrap">
                            <svg class="svg-icon phone-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 459 459" xml:space="preserve">
                                <path class="st0" d="M433.5,318.8c-30.6,0-61.2-5.1-91.8-15.3c-7.6-2.5-17.9,0-25.5,5.1l-56.1,56.1 c-71.4-35.7-130.1-96.9-168.3-168.3l56.1-56.1c7.6-7.6,10.2-17.8,5.1-25.5c-7.6-28.1-12.8-58.7-12.8-89.3 c0-15.3-10.2-25.5-25.5-25.5H25.5C10.2,0,0,10.2,0,25.5C0,265.2,193.8,459,433.5,459c15.3,0,25.5-10.2,25.5-25.5v-89.3 C459,329,448.8,318.8,433.5,318.8z"/>
                            </svg>
                        </span> {{ config.Site.phone }}
                    </a>
                    <a href="/agency/realty/add" class="btn-consult btn-consult-red" data-extra="1">Подать объявление</a>
                    <a href="#" class="open-phone-modal btn-consult" data-extra="2">Заказать звонок</a>

                    {% if not favoriteButton %}
                        <div class="search-form-wrap">
                            {{ form.create('Advertisement', {
                                'url': {'plugin':'agency','controller':'realty','action':'index'},
                                'class': "search-form hide"
                            }) }}
                            {{ form.input('Advertisement.search', {'type': 'text', 'class': 'input-header-search placeholder-light', 'div': false, 'placeholder': 'Поиск по слову', 'label': false}) }}
                            <button class="search-btn">
                                <svg width="20" height="20" class="svg-icon search-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 250.313 250.313" xml:space="preserve">
                                    <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M244.186,214.604l-54.379-54.378c-0.289-0.289-0.628-0.491-0.93-0.76 c10.7-16.231,16.945-35.66,16.945-56.554C205.822,46.075,159.747,0,102.911,0S0,46.075,0,102.911 c0,56.835,46.074,102.911,102.91,102.911c20.895,0,40.323-6.245,56.554-16.945c0.269,0.301,0.47,0.64,0.759,0.929l54.38,54.38 c8.169,8.168,21.413,8.168,29.583,0C252.354,236.017,252.354,222.773,244.186,214.604z M102.911,170.146 c-37.134,0-67.236-30.102-67.236-67.235c0-37.134,30.103-67.236,67.236-67.236c37.132,0,67.235,30.103,67.235,67.236 C170.146,140.044,140.043,170.146,102.911,170.146z" fill="#FFFFFF"/>
                                </svg>
                            </button>
                            {{ form.end() }}
                            <div class="search-icon-wrap">
                                <svg width="20" height="20" class="svg-icon search-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 250.313 250.313" xml:space="preserve">
                                <path style="fill-rule:evenodd;clip-rule:evenodd;" d="M244.186,214.604l-54.379-54.378c-0.289-0.289-0.628-0.491-0.93-0.76 c10.7-16.231,16.945-35.66,16.945-56.554C205.822,46.075,159.747,0,102.911,0S0,46.075,0,102.911 c0,56.835,46.074,102.911,102.91,102.911c20.895,0,40.323-6.245,56.554-16.945c0.269,0.301,0.47,0.64,0.759,0.929l54.38,54.38 c8.169,8.168,21.413,8.168,29.583,0C252.354,236.017,252.354,222.773,244.186,214.604z M102.911,170.146 c-37.134,0-67.236-30.102-67.236-67.235c0-37.134,30.103-67.236,67.236-67.236c37.132,0,67.235,30.103,67.235,67.236 C170.146,140.044,140.043,170.146,102.911,170.146z" fill="#FFFFFF"/>
                            </svg>
                            </div>
                        </div>
                        <a href="mailto:{{ config.Site.email }}" class="mail-link">
                            <span class="mail-link-text">{{ config.Site.email }}</span>
                            <svg class="svg-icon mail-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 477.9 477.9" xml:space="preserve">
                            <path class="st0" d="M460.8,68.3H17.1C7.6,68.3,0,75.9,0,85.3v307.2c0,9.4,7.6,17.1,17.1,17.1h443.7c9.4,0,17.1-7.6,17.1-17.1 V85.3C477.9,75.9,470.2,68.3,460.8,68.3z M432.8,102.4L238.9,251.5L45.1,102.4H432.8z M443.7,375.5H34.1V137.1l194.4,149.5 c6.1,4.7,14.7,4.7,20.8,0l194.4-149.5V375.5z"/>
                        </svg>
                        </a>
                    {% else %}
                        {% set favorite = _view.loadHelper('Favorites.Favorite') %}
                        <a href="/favorites" class="{{ favoriteButtonWrapperClass }}">
                            <svg class="svg-icon star-icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 512 512">
                                <path class="st0" d="M118.9,327.7l-27,165.7c-2.2,13.2,11.9,23,23.5,16.6L256,432.3L396.6,510c11.5,6.4,25.7-3.3,23.5-16.6 l-27-165.7l114.3-117.2c9.1-9.3,3.9-25-9-27l-157.4-24L270.5,9.2c-5.3-11.2-23.7-11.2-29,0L171,159.5l-157.4,24 c-12.9,2-18.1,17.7-9,27L118.9,327.7z" fill="#F8E24E"/>
                            </svg> В избранном (<span class="favorite-counter">{{ favorite.count() }}</span>)
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</header>
